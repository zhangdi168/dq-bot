{"level":"fatal","time":"2022-05-23 10:44:03","caller":"router/router.go:59","msg":"new cache err","domain":"go-gin-api[fat]","error":"ping redis err; dial tcp 119.29.64.194:6379: connectex: No connection could be made because the target machine actively refused it.","errorVerbose":"ping redis err; dial tcp 119.29.64.194:6379: connectex: No connection could be made because the target machine actively refused it.\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.redisConnect\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:73\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.New\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:49\ngithub.com/zhangdi168/dq-bot/internal/router.NewHTTPServer\n\tD:/my/go/src/dq-bot/internal/router/router.go:57\nmain.main\n\tD:/my/go/src/dq-bot/main.go:64\nruntime.main\n\tC:/Program Files/Go/src/runtime/proc.go:250\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"fatal","time":"2022-05-23 10:47:24","caller":"router/router.go:59","msg":"new cache err","domain":"go-gin-api[fat]","error":"ping redis err; dial tcp 119.29.64.194:6379: connectex: No connection could be made because the target machine actively refused it.","errorVerbose":"ping redis err; dial tcp 119.29.64.194:6379: connectex: No connection could be made because the target machine actively refused it.\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.redisConnect\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:73\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.New\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:49\ngithub.com/zhangdi168/dq-bot/internal/router.NewHTTPServer\n\tD:/my/go/src/dq-bot/internal/router/router.go:57\nmain.main\n\tD:/my/go/src/dq-bot/main.go:64\nruntime.main\n\tC:/Program Files/Go/src/runtime/proc.go:250\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"fatal","time":"2022-05-23 10:47:48","caller":"router/router.go:59","msg":"new cache err","domain":"go-gin-api[fat]","error":"ping redis err; dial tcp 119.29.64.194:6379: connectex: No connection could be made because the target machine actively refused it.","errorVerbose":"ping redis err; dial tcp 119.29.64.194:6379: connectex: No connection could be made because the target machine actively refused it.\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.redisConnect\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:73\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.New\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:49\ngithub.com/zhangdi168/dq-bot/internal/router.NewHTTPServer\n\tD:/my/go/src/dq-bot/internal/router/router.go:57\nmain.main\n\tD:/my/go/src/dq-bot/main.go:64\nruntime.main\n\tC:/Program Files/Go/src/runtime/proc.go:250\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"fatal","time":"2022-05-23 10:51:11","caller":"router/router.go:59","msg":"new cache err","domain":"go-gin-api[fat]","error":"ping redis err; dial tcp 119.29.64.194:6789: i/o timeout","errorVerbose":"ping redis err; dial tcp 119.29.64.194:6789: i/o timeout\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.redisConnect\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:73\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.New\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:49\ngithub.com/zhangdi168/dq-bot/internal/router.NewHTTPServer\n\tD:/my/go/src/dq-bot/internal/router/router.go:57\nmain.main\n\tD:/my/go/src/dq-bot/main.go:64\nruntime.main\n\tC:/Program Files/Go/src/runtime/proc.go:250\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"fatal","time":"2022-05-23 10:51:40","caller":"router/router.go:59","msg":"new cache err","domain":"go-gin-api[fat]","error":"ping redis err; dial tcp 119.29.64.194:6789: connectex: No connection could be made because the target machine actively refused it.","errorVerbose":"ping redis err; dial tcp 119.29.64.194:6789: connectex: No connection could be made because the target machine actively refused it.\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.redisConnect\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:73\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.New\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:49\ngithub.com/zhangdi168/dq-bot/internal/router.NewHTTPServer\n\tD:/my/go/src/dq-bot/internal/router/router.go:57\nmain.main\n\tD:/my/go/src/dq-bot/main.go:64\nruntime.main\n\tC:/Program Files/Go/src/runtime/proc.go:250\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"fatal","time":"2022-05-23 10:55:05","caller":"router/router.go:59","msg":"new cache err","domain":"go-gin-api[fat]","error":"ping redis err; dial tcp 119.29.64.194:6789: connectex: No connection could be made because the target machine actively refused it.","errorVerbose":"ping redis err; dial tcp 119.29.64.194:6789: connectex: No connection could be made because the target machine actively refused it.\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.redisConnect\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:73\ngithub.com/zhangdi168/dq-bot/internal/repository/redis.New\n\tD:/my/go/src/dq-bot/internal/repository/redis/redis.go:49\ngithub.com/zhangdi168/dq-bot/internal/router.NewHTTPServer\n\tD:/my/go/src/dq-bot/internal/router/router.go:57\nmain.main\n\tD:/my/go/src/dq-bot/main.go:64\nruntime.main\n\tC:/Program Files/Go/src/runtime/proc.go:250\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"info","time":"2022-05-23 11:11:03","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0,"trace_id":"4b3b07bb444a23e4e874","trace_info":{"trace_id":"4b3b07bb444a23e4e874","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin S4FGgiY5McPqL7siUeR4Ju8JQW5I0XJoribIHL7lKL8=","Authorization-Date":"2022-05-23 11:11:02","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":""},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["4b3b07bb444a23e4e874"],"Vary":["Origin"]},"body":null,"business_code":10104,"business_code_msg":"签名信息错误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\ngithub.com/zhangdi168/dq-bot/internal/router/interceptor.(*interceptor).CheckLogin\n\tD:/my/go/src/dq-bot/internal/router/interceptor/check_login.go:21\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.WrapAuthHandler.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:132\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:540\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:522\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:326\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2916\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:1966\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"info","time":"2022-05-23 11:11:20","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.620661,"trace_id":"3a22b644da81cd02adc4","trace_info":{"trace_id":"3a22b644da81cd02adc4","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin kpk2jf4ZVOzh9O405a8r79jfRF0VJWi8CDvdJRtfe+E=","Authorization-Date":"2022-05-23 11:11:20","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["3a22b644da81cd02adc4"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.620661},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-23 11:11:20","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0885898},{"timestamp":"2022-05-23 11:11:20","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0871372},{"timestamp":"2022-05-23 11:11:20","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":25,"cost_seconds":0.0965865},{"timestamp":"2022-05-23 11:11:20","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0890965},{"timestamp":"2022-05-23 11:11:20","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0879309}],"redis":[{"timestamp":"2022-05-23 11:11:20","handle":"set","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0850849},{"timestamp":"2022-05-23 11:11:20","handle":"set","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":23,\"pid\":0,\"name\":\"后台任务\",\"link\":\"\",\"icon\":\"mdi-av-timer\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0416197},{"timestamp":"2022-05-23 11:11:20","handle":"set","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0434555}],"success":true,"cost_seconds":0.620661}}
{"level":"info","time":"2022-05-23 11:11:21","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.215738,"trace_id":"69f82674917dcb1f1365","trace_info":{"trace_id":"69f82674917dcb1f1365","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin 54bKLEaDwadnlpXBRF9AXqJfMsztrP3h2Vo1zsR2jvY=","Authorization-Date":"2022-05-23 11:11:21","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["69f82674917dcb1f1365"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":23,"pid":0,"name":"后台任务","link":"","icon":"mdi-av-timer"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.215738},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-23 11:11:21","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0859831}],"redis":[{"timestamp":"2022-05-23 11:11:21","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0432761},{"timestamp":"2022-05-23 11:11:21","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0431477}],"success":true,"cost_seconds":0.215738}}
{"level":"info","time":"2022-05-23 18:10:58","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.2041267,"trace_id":"882094f8216a5ad5cf60","trace_info":{"trace_id":"882094f8216a5ad5cf60","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin c599vRFq5sBZTrIJni/Cuk/4obqLfZQQiLctQqW8XYs=","Authorization-Date":"2022-05-23 18:10:58","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["882094f8216a5ad5cf60"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":23,"pid":0,"name":"后台任务","link":"","icon":"mdi-av-timer"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.2041267},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-23 18:10:58","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0904724}],"redis":[{"timestamp":"2022-05-23 18:10:58","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0376049},{"timestamp":"2022-05-23 18:10:58","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0376519}],"success":true,"cost_seconds":0.2041267}}
{"level":"info","time":"2022-05-24 11:22:42","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"GET","path":"/helper/md5/123","http_code":200,"business_code":0,"success":true,"cost_seconds":0.0003382,"trace_id":"38fd3842e1b283fe4fb7","trace_info":{"trace_id":"38fd3842e1b283fe4fb7","request":{"ttl":"un-limit","method":"GET","decoded_url":"/helper/md5/123","header":{"Authorization":"","Authorization-Date":"","Content-Type":"","Token":""},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["38fd3842e1b283fe4fb7"],"Vary":["Origin"]},"body":{"md5_str":"202cb962ac59075b964b07152d234b70"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.0003382},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":true,"cost_seconds":0.0003382}}
{"level":"info","time":"2022-05-24 13:49:11","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.0004223,"trace_id":"250aa9771635854bcf6b","trace_info":{"trace_id":"250aa9771635854bcf6b","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin Bv3rH9LusUdT5RARte2Zs5jzJhTFTuwWonvhTsTnU44=","Authorization-Date":"2022-05-24 13:49:11","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":""},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["250aa9771635854bcf6b"],"Vary":["Origin"]},"body":null,"business_code":10104,"business_code_msg":"签名信息错误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.0004223},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0004223},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\ngithub.com/zhangdi168/dq-bot/internal/router/interceptor.(*interceptor).CheckLogin\n\tD:/my/go/src/dq-bot/internal/router/interceptor/check_login.go:21\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.WrapAuthHandler.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:132\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:540\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:522\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:326\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2916\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:1966\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"info","time":"2022-05-24 13:49:25","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4887356,"trace_id":"e339826061d271768b8f","trace_info":{"trace_id":"e339826061d271768b8f","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin bOinPEdz3cbecxW3od6x3KgFIJZOhRq1QMVyqyr08gg=","Authorization-Date":"2022-05-24 13:49:25","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["e339826061d271768b8f"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4887356},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-24 13:49:25","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0757289},{"timestamp":"2022-05-24 13:49:25","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0754542},{"timestamp":"2022-05-24 13:49:25","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":25,"cost_seconds":0.0755598},{"timestamp":"2022-05-24 13:49:25","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0754043},{"timestamp":"2022-05-24 13:49:25","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.07674}],"redis":[{"timestamp":"2022-05-24 13:49:25","handle":"set","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0354624},{"timestamp":"2022-05-24 13:49:25","handle":"set","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":23,\"pid\":0,\"name\":\"后台任务\",\"link\":\"\",\"icon\":\"mdi-av-timer\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0352807},{"timestamp":"2022-05-24 13:49:25","handle":"set","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0375992}],"success":true,"cost_seconds":0.4887356}}
{"level":"info","time":"2022-05-24 13:49:26","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1843943,"trace_id":"6b673a3f78394e3d687e","trace_info":{"trace_id":"6b673a3f78394e3d687e","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin hNKBmqMyo6ayLb+P9HPFtmU4a9WLeFP1NoYZRY3Xiic=","Authorization-Date":"2022-05-24 13:49:26","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["6b673a3f78394e3d687e"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":23,"pid":0,"name":"后台任务","link":"","icon":"mdi-av-timer"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1843943},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-24 13:49:26","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0753433}],"redis":[{"timestamp":"2022-05-24 13:49:26","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.035972},{"timestamp":"2022-05-24 13:49:26","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0362169}],"success":true,"cost_seconds":0.1843943}}
{"level":"info","time":"2022-05-24 13:49:26","caller":"core/core.go:508","msg":"trace-log","domain":"go-gin-api[fat]","method":"GET","path":"/api/admin?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.3639449,"trace_id":"555332e5dd7450039ccf","trace_info":{"trace_id":"555332e5dd7450039ccf","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin?page=1&page_size=10","header":{"Authorization":"admin 9BW3+NtTCcBJb5BArz4Vgrx5qoxPWO4Qh12h0t1omr8=","Authorization-Date":"2022-05-24 13:49:26","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["555332e5dd7450039ccf"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","username":"admin","nickname":"管理员","mobile":"13888888888","is_used":1,"is_online":1,"created_at":"2022-05-23 10:37:07","created_user":"init","updated_at":"2022-05-23 10:37:07","updated_user":""}],"pagination":{"total":1,"current_page":1,"per_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.3639449},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-24 13:49:26","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":1,"cost_seconds":0.0740914},{"timestamp":"2022-05-24 13:49:26","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:81","sql":"SELECT count(*) FROM `admin` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.075228}],"redis":[{"timestamp":"2022-05-24 13:49:26","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0359124},{"timestamp":"2022-05-24 13:49:26","handle":"get","key":"go-gin-api:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.03596}],"success":true,"cost_seconds":0.3639449}}
