{"level":"error","time":"2022-05-30 17:16:14","caller":"core/core.go:372","msg":"got panicruntime error: invalid memory address or nil pointer dereference","domain":"dq-bot[fat]","panic":"runtime error: invalid memory address or nil pointer dereference","stack":"goroutine 103 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2.1()\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:371 +0x14c\npanic({0xd19b20, 0x309b5a0})\n\tC:/Program Files/Go/src/runtime/panic.go:838 +0x207\ngithub.com/zhangdi168/dq-bot/internal/services/admin.(*service).Detail(0xc00055f880, {0x182e110, 0xc001986028}, 0xc00198a0f0)\n\tD:/my/go/src/dq-bot/internal/services/admin/service_detail.go:47 +0x9cc\ngithub.com/zhangdi168/dq-bot/internal/api/admin.(*handler).Login.func1({0x182e110, 0xc001986028})\n\tD:/my/go/src/dq-bot/internal/api/admin/func_login.go:56 +0x2c2\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1(0xc001998100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211 +0xbe\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3(0xc001998100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542 +0x268\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2(0xc001998100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524 +0x29f\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1(0xc001998100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328 +0x6d\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0001041a0, 0xc001998100)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489 +0x63e\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0001041a0, {0x18238c8?, 0xc0019a6000}, 0xc001998000)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445 +0x1c5\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP(0x0?, {0x18238c8?, 0xc0019a6000?}, 0x22dda5?)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231 +0x26\nnet/http.serverHandler.ServeHTTP({0x1821360?}, {0x18238c8, 0xc0019a6000}, 0xc001998000)\n\tC:/Program Files/Go/src/net/http/server.go:2916 +0x43b\nnet/http.(*conn).serve(0xc000568320, {0x1824590, 0xc001826330})\n\tC:/Program Files/Go/src/net/http/server.go:1966 +0x5d7\ncreated by net/http.(*Server).Serve\n\tC:/Program Files/Go/src/net/http/server.go:3071 +0x4db\n"}
{"level":"error","time":"2022-05-30 17:16:14","caller":"alert/alert.go:21","msg":"Mail config error","domain":"dq-bot[fat]"}
{"level":"info","time":"2022-05-30 17:16:14","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":500,"business_code":10101,"success":false,"cost_seconds":0.0006017,"trace_id":"86746e2773303a6a6eb3","trace_info":{"trace_id":"86746e2773303a6a6eb3","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin LiQvv0ipM9vlAn9DcSoV+iUonG/bOV+l83/ce0Ha5+A=","Authorization-Date":"2022-05-30 17:16:14","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["86746e2773303a6a6eb3"],"Vary":["Origin"]},"body":null,"business_code":10101,"business_code_msg":"内部服务器错误","http_code":500,"http_code_msg":"Internal Server Error","cost_seconds":0.0006017},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0006017}}
{"level":"info","time":"2022-05-30 17:25:10","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":400,"business_code":20206,"success":false,"cost_seconds":0.0006012,"trace_id":"5f2210055a2e07334718","trace_info":{"trace_id":"5f2210055a2e07334718","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin NMHmjJIqlQUwECgecCy0tLctg5In7ONH35DSKX2qVbY=","Authorization-Date":"2022-05-30 17:25:10","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["5f2210055a2e07334718"],"Vary":["Origin"]},"body":null,"business_code":20206,"business_code_msg":"登录失败","http_code":400,"http_code_msg":"Bad Request","cost_seconds":0.0006012},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0006012},"error":"未查询出符合条件的用户","errorVerbose":"未查询出符合条件的用户\ngithub.com/zhangdi168/dq-bot/internal/api/admin.(*handler).Login.func1\n\tD:/my/go/src/dq-bot/internal/api/admin/func_login.go:70\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2916\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:1966\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"info","time":"2022-05-30 17:25:13","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":400,"business_code":20206,"success":false,"cost_seconds":0.0005577,"trace_id":"4aa01a6d8638db7c0b1b","trace_info":{"trace_id":"4aa01a6d8638db7c0b1b","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin 8t+7JwG5BUf0vUS8AwqYV/HWfZUokyOAbp1c65Ixo/k=","Authorization-Date":"2022-05-30 17:25:13","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["4aa01a6d8638db7c0b1b"],"Vary":["Origin"]},"body":null,"business_code":20206,"business_code_msg":"登录失败","http_code":400,"http_code_msg":"Bad Request","cost_seconds":0.0005577},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0005577},"error":"未查询出符合条件的用户","errorVerbose":"未查询出符合条件的用户\ngithub.com/zhangdi168/dq-bot/internal/api/admin.(*handler).Login.func1\n\tD:/my/go/src/dq-bot/internal/api/admin/func_login.go:70\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2916\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:1966\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"error","time":"2022-05-30 17:28:38","caller":"core/core.go:372","msg":"got panicruntime error: invalid memory address or nil pointer dereference","domain":"dq-bot[fat]","panic":"runtime error: invalid memory address or nil pointer dereference","stack":"goroutine 103 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2.1()\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:371 +0x14c\npanic({0x1579b20, 0x38fb5a0})\n\tC:/Program Files/Go/src/runtime/panic.go:838 +0x207\ngithub.com/zhangdi168/dq-bot/internal/api/admin.(*handler).Login.func1({0x208e0d0, 0xc00014e928})\n\tD:/my/go/src/dq-bot/internal/api/admin/func_login.go:84 +0x7fc\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1(0xc00018ab00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211 +0xbe\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3(0xc00018ab00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542 +0x268\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2(0xc00018ab00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524 +0x29f\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1(0xc00018ab00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328 +0x6d\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc000204d00, 0xc00018ab00)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489 +0x63e\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000204d00, {0x2083888?, 0xc000194380}, 0xc00018aa00)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445 +0x1c5\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP(0x0?, {0x2083888?, 0xc000194380?}, 0xa8dda5?)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231 +0x26\nnet/http.serverHandler.ServeHTTP({0x2081320?}, {0x2083888, 0xc000194380}, 0xc00018aa00)\n\tC:/Program Files/Go/src/net/http/server.go:2916 +0x43b\nnet/http.(*conn).serve(0xc00028d680, {0x2084550, 0xc0003aa270})\n\tC:/Program Files/Go/src/net/http/server.go:1966 +0x5d7\ncreated by net/http.(*Server).Serve\n\tC:/Program Files/Go/src/net/http/server.go:3071 +0x4db\n"}
{"level":"error","time":"2022-05-30 17:28:38","caller":"alert/alert.go:21","msg":"Mail config error","domain":"dq-bot[fat]"}
{"level":"info","time":"2022-05-30 17:28:38","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":500,"business_code":10101,"success":false,"cost_seconds":0.499079,"trace_id":"991d3734ed2a664742bb","trace_info":{"trace_id":"991d3734ed2a664742bb","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin arWlRY3vokFvZgEBo/tmHIUfyHthaXnItpLoE/sWuHs=","Authorization-Date":"2022-05-30 17:28:37","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["991d3734ed2a664742bb"],"Vary":["Origin"]},"body":null,"business_code":10101,"business_code_msg":"内部服务器错误","http_code":500,"http_code_msg":"Internal Server Error","cost_seconds":0.499079},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.499079}}
{"level":"error","time":"2022-05-30 17:38:40","caller":"core/core.go:372","msg":"got panicruntime error: invalid memory address or nil pointer dereference","domain":"dq-bot[fat]","panic":"runtime error: invalid memory address or nil pointer dereference","stack":"goroutine 103 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2.1()\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:371 +0x14c\npanic({0xfd9b20, 0x335b5a0})\n\tC:/Program Files/Go/src/runtime/panic.go:838 +0x207\ngithub.com/zhangdi168/dq-bot/internal/router/interceptor.(*interceptor).CheckLogin(0xc00030e460, {0x1aee110, 0xc0005ae330})\n\tD:/my/go/src/dq-bot/internal/router/interceptor/check_login.go:26 +0x2fd\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.WrapAuthHandler.func1({0x1aee110, 0xc0005ae330})\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:132 +0x27\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1(0xc0001dc400)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211 +0xbe\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3(0xc0001dc400)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542 +0x268\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2(0xc0001dc400)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524 +0x29f\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1(0xc0001dc400)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328 +0x6d\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc000212b60, 0xc0001dc400)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489 +0x63e\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000212b60, {0x1ae38c8?, 0xc0004f8000}, 0xc0001dc300)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445 +0x1c5\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP(0x0?, {0x1ae38c8?, 0xc0004f8000?}, 0xc000680000?)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231 +0x26\nnet/http.serverHandler.ServeHTTP({0xc0001fda10?}, {0x1ae38c8, 0xc0004f8000}, 0xc0001dc300)\n\tC:/Program Files/Go/src/net/http/server.go:2916 +0x43b\nnet/http.(*conn).serve(0xc00022cbe0, {0x1ae4590, 0xc0001fd9b0})\n\tC:/Program Files/Go/src/net/http/server.go:1966 +0x5d7\ncreated by net/http.(*Server).Serve\n\tC:/Program Files/Go/src/net/http/server.go:3071 +0x4db\n"}
{"level":"error","time":"2022-05-30 17:38:40","caller":"alert/alert.go:21","msg":"Mail config error","domain":"dq-bot[fat]"}
{"level":"info","time":"2022-05-30 17:38:40","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/admin/logout","http_code":500,"business_code":10101,"success":false,"cost_seconds":0.0005627,"trace_id":"23f86b8aced62908bba8","trace_info":{"trace_id":"23f86b8aced62908bba8","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/admin/logout","header":{"Authorization":"admin tnR5TXpCFK2foT1Fjf0z/ixhohi9aSlEWZWv1pPR9W4=","Authorization-Date":"2022-05-30 17:38:40","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["23f86b8aced62908bba8"],"Vary":["Origin"]},"body":null,"business_code":10101,"business_code_msg":"内部服务器错误","http_code":500,"http_code_msg":"Internal Server Error","cost_seconds":0.0005627},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0005627}}
{"level":"error","time":"2022-05-30 17:38:43","caller":"core/core.go:372","msg":"got panicruntime error: invalid memory address or nil pointer dereference","domain":"dq-bot[fat]","panic":"runtime error: invalid memory address or nil pointer dereference","stack":"goroutine 123 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2.1()\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:371 +0x14c\npanic({0xfd9b20, 0x335b5a0})\n\tC:/Program Files/Go/src/runtime/panic.go:838 +0x207\ngithub.com/zhangdi168/dq-bot/internal/router/interceptor.(*interceptor).CheckLogin(0xc00030e460, {0x1aee110, 0xc001c6c2a0})\n\tD:/my/go/src/dq-bot/internal/router/interceptor/check_login.go:26 +0x2fd\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.WrapAuthHandler.func1({0x1aee110, 0xc001c6c2a0})\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:132 +0x27\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1(0xc00051ec00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211 +0xbe\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3(0xc00051ec00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542 +0x268\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2(0xc00051ec00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524 +0x29f\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1(0xc00051ec00)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328 +0x6d\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc000212b60, 0xc00051ec00)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489 +0x63e\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000212b60, {0x1ae38c8?, 0xc000162a80}, 0xc0005e8b00)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445 +0x1c5\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP(0x0?, {0x1ae38c8?, 0xc000162a80?}, 0xc0003e8000?)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231 +0x26\nnet/http.serverHandler.ServeHTTP({0xc00192f9b0?}, {0x1ae38c8, 0xc000162a80}, 0xc0005e8b00)\n\tC:/Program Files/Go/src/net/http/server.go:2916 +0x43b\nnet/http.(*conn).serve(0xc0002980a0, {0x1ae4590, 0xc0001fd9b0})\n\tC:/Program Files/Go/src/net/http/server.go:1966 +0x5d7\ncreated by net/http.(*Server).Serve\n\tC:/Program Files/Go/src/net/http/server.go:3071 +0x4db\n"}
{"level":"error","time":"2022-05-30 17:38:43","caller":"alert/alert.go:21","msg":"Mail config error","domain":"dq-bot[fat]"}
{"level":"info","time":"2022-05-30 17:38:43","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":500,"business_code":10101,"success":false,"cost_seconds":0.0005527,"trace_id":"cca2e4c3c4a2eebf9470","trace_info":{"trace_id":"cca2e4c3c4a2eebf9470","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin /NIxwidfhj3W3ArRyg5So7FOOqfVePC/i5ENacqgGvI=","Authorization-Date":"2022-05-30 17:38:43","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["cca2e4c3c4a2eebf9470"],"Vary":["Origin"]},"body":null,"business_code":10101,"business_code_msg":"内部服务器错误","http_code":500,"http_code_msg":"Internal Server Error","cost_seconds":0.0005527},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0005527}}
{"level":"fatal","time":"2022-05-30 17:38:58","caller":"dq-bot/main.go:78","msg":"http server startup err","domain":"dq-bot[fat]","error":"listen tcp :9999: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted."}
{"level":"error","time":"2022-05-30 17:39:11","caller":"core/core.go:372","msg":"got panicruntime error: invalid memory address or nil pointer dereference","domain":"dq-bot[fat]","panic":"runtime error: invalid memory address or nil pointer dereference","stack":"goroutine 106 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2.1()\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:371 +0x14c\npanic({0xfd9b20, 0x335b5a0})\n\tC:/Program Files/Go/src/runtime/panic.go:838 +0x207\ngithub.com/zhangdi168/dq-bot/internal/services/admin.(*service).Detail(0xc000075740, {0x1aee110, 0xc00014e1b0}, 0xc0000b40f0)\n\tD:/my/go/src/dq-bot/internal/services/admin/service_detail.go:47 +0x9cc\ngithub.com/zhangdi168/dq-bot/internal/api/admin.(*handler).Login.func1({0x1aee110, 0xc00014e1b0})\n\tD:/my/go/src/dq-bot/internal/api/admin/func_login.go:56 +0x2c2\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1(0xc0000be100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211 +0xbe\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3(0xc0000be100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542 +0x268\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2(0xc0000be100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524 +0x29f\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1(0xc0000be100)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328 +0x6d\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0002b0820, 0xc0000be100)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489 +0x63e\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0002b0820, {0x1ae38c8?, 0xc0000cc000}, 0xc0000be000)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445 +0x1c5\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP(0x0?, {0x1ae38c8?, 0xc0000cc000?}, 0x4edda5?)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231 +0x26\nnet/http.serverHandler.ServeHTTP({0x1ae1360?}, {0x1ae38c8, 0xc0000cc000}, 0xc0000be000)\n\tC:/Program Files/Go/src/net/http/server.go:2916 +0x43b\nnet/http.(*conn).serve(0xc000468b40, {0x1ae4590, 0xc001964990})\n\tC:/Program Files/Go/src/net/http/server.go:1966 +0x5d7\ncreated by net/http.(*Server).Serve\n\tC:/Program Files/Go/src/net/http/server.go:3071 +0x4db\n"}
{"level":"error","time":"2022-05-30 17:39:11","caller":"alert/alert.go:21","msg":"Mail config error","domain":"dq-bot[fat]"}
{"level":"info","time":"2022-05-30 17:39:11","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":500,"business_code":10101,"success":false,"cost_seconds":0.0005647,"trace_id":"608aef558c3815a9a940","trace_info":{"trace_id":"608aef558c3815a9a940","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin oZamCbD49HEjCWAPMghLc1vevs6qms5IHj+L0dLflNs=","Authorization-Date":"2022-05-30 17:39:11","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["608aef558c3815a9a940"],"Vary":["Origin"]},"body":null,"business_code":10101,"business_code_msg":"内部服务器错误","http_code":500,"http_code_msg":"Internal Server Error","cost_seconds":0.0005647},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0005647}}
{"level":"info","time":"2022-05-30 17:39:36","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4741298,"trace_id":"179273cb0014d39320ca","trace_info":{"trace_id":"179273cb0014d39320ca","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin 6Id88vB47XlKetulW1CkIZaeSyPpUVFb2xhjuYg6Xmw=","Authorization-Date":"2022-05-30 17:39:35","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["179273cb0014d39320ca"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4741298},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:39:35","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.071152},{"timestamp":"2022-05-30 17:39:35","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.070822},{"timestamp":"2022-05-30 17:39:35","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.06709},{"timestamp":"2022-05-30 17:39:36","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0672618},{"timestamp":"2022-05-30 17:39:36","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0738378}],"redis":[{"timestamp":"2022-05-30 17:39:35","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0378881},{"timestamp":"2022-05-30 17:39:35","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0465116},{"timestamp":"2022-05-30 17:39:36","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0380867}],"success":true,"cost_seconds":0.4741298}}
{"level":"info","time":"2022-05-30 17:39:36","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.187898,"trace_id":"d2db15bf76051e1730f5","trace_info":{"trace_id":"d2db15bf76051e1730f5","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin bfYeukTEYkqpYmbs+MjAAXgM6Ax8QOoQx+kMrZUUlcI=","Authorization-Date":"2022-05-30 17:39:36","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["d2db15bf76051e1730f5"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.187898},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:39:36","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0680619}],"redis":[{"timestamp":"2022-05-30 17:39:36","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0391995},{"timestamp":"2022-05-30 17:39:36","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0406483}],"success":true,"cost_seconds":0.187898}}
{"level":"info","time":"2022-05-30 17:41:06","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/admin/logout","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1019905,"trace_id":"7402743806ba13fddb38","trace_info":{"trace_id":"7402743806ba13fddb38","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/admin/logout","header":{"Authorization":"admin DuwYBskBnSffN/M5OQh4YehOufn2Vt4MaEv3vq2FFAI=","Authorization-Date":"2022-05-30 17:41:06","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["7402743806ba13fddb38"],"Vary":["Origin"]},"body":{"username":"admin"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1019905},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 17:41:06","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0340741},{"timestamp":"2022-05-30 17:41:06","handle":"del","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0330607}],"success":true,"cost_seconds":0.1019905}}
{"level":"info","time":"2022-05-30 17:41:09","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4484762,"trace_id":"d97cc3937fb4c9aa84e7","trace_info":{"trace_id":"d97cc3937fb4c9aa84e7","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin KGwqirTxuHiVe1VZ8GidGnTJY2XrdMVTqoOs3UO56fM=","Authorization-Date":"2022-05-30 17:41:09","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["d97cc3937fb4c9aa84e7"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4484762},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:41:09","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0691799},{"timestamp":"2022-05-30 17:41:09","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.075738},{"timestamp":"2022-05-30 17:41:09","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0686937},{"timestamp":"2022-05-30 17:41:09","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0658648},{"timestamp":"2022-05-30 17:41:09","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0651724}],"redis":[{"timestamp":"2022-05-30 17:41:09","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.035284},{"timestamp":"2022-05-30 17:41:09","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0339265},{"timestamp":"2022-05-30 17:41:09","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0339613}],"success":true,"cost_seconds":0.4484762}}
{"level":"info","time":"2022-05-30 17:41:10","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1669021,"trace_id":"26ecb0e41718ddb9ba02","trace_info":{"trace_id":"26ecb0e41718ddb9ba02","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin dqSXuSUVY14W39JZn30y5VfB1jSOY9mMT2q2kUaIuUE=","Authorization-Date":"2022-05-30 17:41:09","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["26ecb0e41718ddb9ba02"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1669021},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:41:10","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0646743}],"redis":[{"timestamp":"2022-05-30 17:41:10","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0332621},{"timestamp":"2022-05-30 17:41:10","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0339723}],"success":true,"cost_seconds":0.1669021}}
{"level":"info","time":"2022-05-30 17:41:12","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/admin/logout","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1029113,"trace_id":"74a29a84dd01a44233ea","trace_info":{"trace_id":"74a29a84dd01a44233ea","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/admin/logout","header":{"Authorization":"admin kT0pT2VNMD0WLNIU2ujg4o0pJ31Yrfe74lIm37uvufY=","Authorization-Date":"2022-05-30 17:41:12","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["74a29a84dd01a44233ea"],"Vary":["Origin"]},"body":{"username":"admin"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1029113},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 17:41:12","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0337191},{"timestamp":"2022-05-30 17:41:12","handle":"del","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0345963}],"success":true,"cost_seconds":0.1029113}}
{"level":"info","time":"2022-05-30 17:41:24","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4479426,"trace_id":"e0f48b33b402a380edab","trace_info":{"trace_id":"e0f48b33b402a380edab","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin IyfPNF3YRZoIBHXmKuica9jJiosBP0TN4uTkVY4m9KI=","Authorization-Date":"2022-05-30 17:41:24","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["e0f48b33b402a380edab"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4479426},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:41:24","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.06813},{"timestamp":"2022-05-30 17:41:24","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0682645},{"timestamp":"2022-05-30 17:41:24","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0713461},{"timestamp":"2022-05-30 17:41:24","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0686414},{"timestamp":"2022-05-30 17:41:24","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0693908}],"redis":[{"timestamp":"2022-05-30 17:41:24","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0342982},{"timestamp":"2022-05-30 17:41:24","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0340376},{"timestamp":"2022-05-30 17:41:24","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0334004}],"success":true,"cost_seconds":0.4479426}}
{"level":"info","time":"2022-05-30 17:41:25","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1733229,"trace_id":"193220f8d9edfd61474c","trace_info":{"trace_id":"193220f8d9edfd61474c","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin eTMCpjgb0pAKZAOi0lGXMaqKIwp02XrBIAH/7Wgv5EY=","Authorization-Date":"2022-05-30 17:41:25","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["193220f8d9edfd61474c"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1733229},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:41:25","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0669611}],"redis":[{"timestamp":"2022-05-30 17:41:25","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0352748},{"timestamp":"2022-05-30 17:41:25","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0351192}],"success":true,"cost_seconds":0.1733229}}
{"level":"info","time":"2022-05-30 17:41:36","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/admin/logout","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1075703,"trace_id":"272cd8dd64c0b0561007","trace_info":{"trace_id":"272cd8dd64c0b0561007","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/admin/logout","header":{"Authorization":"admin nx5d1SlGQpGvQqN7/7Agv70ff6HN9ofZZZck/VOmwmA=","Authorization-Date":"2022-05-30 17:41:35","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["272cd8dd64c0b0561007"],"Vary":["Origin"]},"body":{"username":"admin"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1075703},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 17:41:36","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0361263},{"timestamp":"2022-05-30 17:41:36","handle":"del","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0361959}],"success":true,"cost_seconds":0.1075703}}
{"level":"info","time":"2022-05-30 17:41:38","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.45674,"trace_id":"7e58a14db9cbf6894ca0","trace_info":{"trace_id":"7e58a14db9cbf6894ca0","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin SQwtYQ5Ltbzy8UhgXkIEz0RnW6SpgQ4WU5aHvIy78Tk=","Authorization-Date":"2022-05-30 17:41:37","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["7e58a14db9cbf6894ca0"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.45674},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:41:37","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0687025},{"timestamp":"2022-05-30 17:41:37","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0730326},{"timestamp":"2022-05-30 17:41:37","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0717262},{"timestamp":"2022-05-30 17:41:38","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.069043},{"timestamp":"2022-05-30 17:41:38","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0681312}],"redis":[{"timestamp":"2022-05-30 17:41:37","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0362788},{"timestamp":"2022-05-30 17:41:38","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0344476},{"timestamp":"2022-05-30 17:41:38","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0346638}],"success":true,"cost_seconds":0.45674}}
{"level":"info","time":"2022-05-30 17:41:38","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1645568,"trace_id":"a901ea61eea89d504b40","trace_info":{"trace_id":"a901ea61eea89d504b40","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin ktjTwi9wl6NTh43qQQ8FOrrne6uuqM7P2PSMCPTyo+I=","Authorization-Date":"2022-05-30 17:41:38","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["a901ea61eea89d504b40"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1645568},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:41:38","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0655968}],"redis":[{"timestamp":"2022-05-30 17:41:38","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0326952},{"timestamp":"2022-05-30 17:41:38","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0329104}],"success":true,"cost_seconds":0.1645568}}
{"level":"info","time":"2022-05-30 17:43:53","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/admin/logout","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1202772,"trace_id":"83e9db6bdad7005257e4","trace_info":{"trace_id":"83e9db6bdad7005257e4","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/admin/logout","header":{"Authorization":"admin vJTq8alCkRgka6tv93+P4vA/S0CMXvsxIt34UiHZmME=","Authorization-Date":"2022-05-30 17:43:53","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["83e9db6bdad7005257e4"],"Vary":["Origin"]},"body":{"username":"admin"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1202772},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 17:43:53","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0372633},{"timestamp":"2022-05-30 17:43:53","handle":"del","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0365671}],"success":true,"cost_seconds":0.1202772}}
{"level":"info","time":"2022-05-30 17:43:56","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4470473,"trace_id":"2d4204e81c76874a7b68","trace_info":{"trace_id":"2d4204e81c76874a7b68","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin unF7RbDr+6As/LrJOpkE6Oh6ZetGaNvds9oivqeo7+k=","Authorization-Date":"2022-05-30 17:43:56","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["2d4204e81c76874a7b68"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4470473},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:43:56","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0681984},{"timestamp":"2022-05-30 17:43:56","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0672835},{"timestamp":"2022-05-30 17:43:56","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0680011},{"timestamp":"2022-05-30 17:43:56","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0658543},{"timestamp":"2022-05-30 17:43:56","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.068697}],"redis":[{"timestamp":"2022-05-30 17:43:56","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0354},{"timestamp":"2022-05-30 17:43:56","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0364892},{"timestamp":"2022-05-30 17:43:56","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0366033}],"success":true,"cost_seconds":0.4470473}}
{"level":"info","time":"2022-05-30 17:43:57","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1738574,"trace_id":"571dfbbf0db98b7419da","trace_info":{"trace_id":"571dfbbf0db98b7419da","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin 7rOQfd2C8QWkOgUtAN/nzr/wSBIOk8/bt6CzXo/ijT0=","Authorization-Date":"2022-05-30 17:43:57","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["571dfbbf0db98b7419da"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1738574},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:43:57","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0669915}],"redis":[{"timestamp":"2022-05-30 17:43:57","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0349672},{"timestamp":"2022-05-30 17:43:57","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.034796}],"success":true,"cost_seconds":0.1738574}}
{"level":"info","time":"2022-05-30 19:31:10","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1803324,"trace_id":"660bc63fec891953bfd6","trace_info":{"trace_id":"660bc63fec891953bfd6","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin MqjZjgAzduNvl3njY+p81QC1RnPxfWRnKFGn+Fn+YVs=","Authorization-Date":"2022-05-30 19:31:10","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["660bc63fec891953bfd6"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1803324},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 19:31:10","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0694374}],"redis":[{"timestamp":"2022-05-30 19:31:10","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0349348},{"timestamp":"2022-05-30 19:31:10","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0401884}],"success":true,"cost_seconds":0.1803324}}
{"level":"info","time":"2022-05-30 19:31:12","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.17451,"trace_id":"67d25d23aabf5bb3d2ec","trace_info":{"trace_id":"67d25d23aabf5bb3d2ec","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin 1M8U3SGGZnsxuXl2HIphFJHkabH38qFuGyePcnnqmos=","Authorization-Date":"2022-05-30 19:31:12","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["67d25d23aabf5bb3d2ec"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.17451},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 19:31:12","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0711497}],"redis":[{"timestamp":"2022-05-30 19:31:12","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.03429},{"timestamp":"2022-05-30 19:31:12","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.034087}],"success":true,"cost_seconds":0.17451}}
{"level":"info","time":"2022-05-30 19:31:18","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.3158979,"trace_id":"404eff09db8f015dcd7c","trace_info":{"trace_id":"404eff09db8f015dcd7c","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Authorization":"admin HNA9T70tsI9R4APJOyqiVA2cVsLUYDBKjdgKdRos9eM=","Authorization-Date":"2022-05-30 19:31:18","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["404eff09db8f015dcd7c"],"Vary":["Origin"]},"body":{"list":[{"id":2,"hashid":"yZ5V1jp6OoWr","business_key":"22","business_secret":"d7b7ac5ae3dae02172e9","business_developer":"3232","remark":"32","is_used":1,"created_at":"2022-05-25 16:30:01","created_user":"admin","updated_at":"2022-05-25 16:30:01","updated_user":""},{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2022-05-23 10:37:07","created_user":"init","updated_at":"2022-05-23 10:37:07","updated_user":""}],"pagination":{"total":2,"current_page":1,"per_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.3158979},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 19:31:18","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/authorized/gen_authorized.go:108","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":2,"cost_seconds":0.0676938},{"timestamp":"2022-05-30 19:31:18","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/authorized/gen_authorized.go:81","sql":"SELECT count(*) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.0681319}],"redis":[{"timestamp":"2022-05-30 19:31:18","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0341875},{"timestamp":"2022-05-30 19:31:18","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0364862}],"success":true,"cost_seconds":0.3158979}}
{"level":"error","time":"2022-05-30 19:31:21","caller":"core/core.go:372","msg":"got panichtml/template: \"keywords_list.html\" is undefined","domain":"dq-bot[fat]","panic":"html/template: \"keywords_list.html\" is undefined","stack":"goroutine 454 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2.1()\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:371 +0x14c\npanic({0x18faf00, 0xc001dfa9f0})\n\tC:/Program Files/Go/src/runtime/panic.go:838 +0x207\ngithub.com/gin-gonic/gin.(*Context).Render(0xc001a8e000, 0xc8, {0x2421f90, 0xc001974090})\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:914 +0x112\ngithub.com/gin-gonic/gin.(*Context).HTML(0xc001a8e000, 0x1a4e022?, {0xc000036e70?, 0x1a3de86?}, {0x0?, 0x0?})\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:923 +0x6d\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*context).HTML(0x3c9fda0?, {0x1a4e022?, 0x1a14840?}, {0x0, 0x0})\n\tD:/my/go/src/dq-bot/internal/pkg/core/context.go:260 +0x5d\ngithub.com/zhangdi168/dq-bot/internal/router.setRenderRouter.func17({0x242e110?, 0xc001dea010?})\n\tD:/my/go/src/dq-bot/internal/render/keywords/keywords.go:27 +0x37\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1(0xc001a8e000)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211 +0xbe\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3(0xc001a8e000)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542 +0x268\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2(0xc001a8e000)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524 +0x29f\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1(0xc001a8e000)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328 +0x6d\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0000676c0, 0xc001a8e000)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489 +0x63e\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0000676c0, {0x24238c8?, 0xc00196d0a0}, 0xc001a0c100)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445 +0x1c5\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP(0x0?, {0x24238c8?, 0xc00196d0a0?}, 0xc000588000?)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231 +0x26\nnet/http.serverHandler.ServeHTTP({0xc000193f20?}, {0x24238c8, 0xc00196d0a0}, 0xc001a0c100)\n\tC:/Program Files/Go/src/net/http/server.go:2916 +0x43b\nnet/http.(*conn).serve(0xc00032a3c0, {0x2424590, 0xc001892150})\n\tC:/Program Files/Go/src/net/http/server.go:1966 +0x5d7\ncreated by net/http.(*Server).Serve\n\tC:/Program Files/Go/src/net/http/server.go:3071 +0x4db\n"}
{"level":"error","time":"2022-05-30 19:31:21","caller":"alert/alert.go:21","msg":"Mail config error","domain":"dq-bot[fat]"}
{"level":"error","time":"2022-05-30 19:31:28","caller":"core/core.go:372","msg":"got panichtml/template: \"keywords_list.html\" is undefined","domain":"dq-bot[fat]","panic":"html/template: \"keywords_list.html\" is undefined","stack":"goroutine 454 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2.1()\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:371 +0x14c\npanic({0x18faf00, 0xc0002e4d00})\n\tC:/Program Files/Go/src/runtime/panic.go:838 +0x207\ngithub.com/gin-gonic/gin.(*Context).Render(0xc0001c2200, 0xc8, {0x2421f90, 0xc00000ef60})\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:914 +0x112\ngithub.com/gin-gonic/gin.(*Context).HTML(0xc0001c2200, 0x1a4e022?, {0xc001d8c4c8?, 0x1a3de86?}, {0x0?, 0x0?})\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:923 +0x6d\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*context).HTML(0x3c9fda0?, {0x1a4e022?, 0x1a14840?}, {0x0, 0x0})\n\tD:/my/go/src/dq-bot/internal/pkg/core/context.go:260 +0x5d\ngithub.com/zhangdi168/dq-bot/internal/router.setRenderRouter.func17({0x242e110?, 0xc0005b4290?})\n\tD:/my/go/src/dq-bot/internal/render/keywords/keywords.go:27 +0x37\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1(0xc0001c2200)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211 +0xbe\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3(0xc0001c2200)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542 +0x268\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2(0xc0001c2200)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524 +0x29f\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1(0xc0001c2200)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328 +0x6d\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0000676c0, 0xc0001c2200)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489 +0x63e\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0000676c0, {0x24238c8?, 0xc00015c700}, 0xc0001c3c00)\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445 +0x1c5\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP(0x0?, {0x24238c8?, 0xc00015c700?}, 0xc00055ac00?)\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231 +0x26\nnet/http.serverHandler.ServeHTTP({0xc000193f20?}, {0x24238c8, 0xc00015c700}, 0xc0001c3c00)\n\tC:/Program Files/Go/src/net/http/server.go:2916 +0x43b\nnet/http.(*conn).serve(0xc00032a3c0, {0x2424590, 0xc001892150})\n\tC:/Program Files/Go/src/net/http/server.go:1966 +0x5d7\ncreated by net/http.(*Server).Serve\n\tC:/Program Files/Go/src/net/http/server.go:3071 +0x4db\n"}
{"level":"error","time":"2022-05-30 19:31:28","caller":"alert/alert.go:21","msg":"Mail config error","domain":"dq-bot[fat]"}
