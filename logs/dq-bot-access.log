{"level":"info","time":"2022-05-28 00:29:21","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.0513208,"trace_id":"24f31dd57dd65d381cb5","trace_info":{"trace_id":"24f31dd57dd65d381cb5","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Authorization":"admin qUIZp80+xeOa0NPvsT5MAuU8VLrs8VMknj/qBcdxQRo=","Authorization-Date":"2022-05-28 00:29:21","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["24f31dd57dd65d381cb5"],"Vary":["Origin"]},"body":null,"business_code":10104,"business_code_msg":"签名信息错误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.0513208},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0513208},"error":"请先登录","errorVerbose":"请先登录\ngithub.com/zhangdi168/dq-bot/internal/router/interceptor.(*interceptor).CheckLogin\n\tD:/project/golang/dq-bot/internal/router/interceptor/check_login.go:30\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.WrapAuthHandler.func1\n\tD:/project/golang/dq-bot/internal/pkg/core/core.go:132\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1\n\tD:/project/golang/dq-bot/internal/pkg/core/core.go:211\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/zhangdi/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3\n\tD:/project/golang/dq-bot/internal/pkg/core/core.go:542\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/zhangdi/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2\n\tD:/project/golang/dq-bot/internal/pkg/core/core.go:524\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/zhangdi/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1\n\tD:/project/golang/dq-bot/internal/pkg/core/core.go:328\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/zhangdi/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/zhangdi/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/zhangdi/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP\n\tD:/project/golang/dq-bot/internal/pkg/core/core.go:231\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2878\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:1929\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1581\n"}
{"level":"info","time":"2022-05-28 00:29:23","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.6098732,"trace_id":"d239874dbbf04bb5eccc","trace_info":{"trace_id":"d239874dbbf04bb5eccc","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin YYjYORIqnjy9uPS2oAkYKAxtA/kmgwmAPkymN71FB9Q=","Authorization-Date":"2022-05-28 00:29:22","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["d239874dbbf04bb5eccc"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.6098732},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-28 00:29:22","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0924629},{"timestamp":"2022-05-28 00:29:23","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0936931},{"timestamp":"2022-05-28 00:29:23","stack":"D:/project/golang/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0916401},{"timestamp":"2022-05-28 00:29:23","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0909052},{"timestamp":"2022-05-28 00:29:23","stack":"D:/project/golang/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0910205}],"redis":[{"timestamp":"2022-05-28 00:29:22","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0499035},{"timestamp":"2022-05-28 00:29:23","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.050373},{"timestamp":"2022-05-28 00:29:23","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0493802}],"success":true,"cost_seconds":0.6098732}}
{"level":"info","time":"2022-05-28 00:29:23","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.2687338,"trace_id":"a98ba8a804fb281b320b","trace_info":{"trace_id":"a98ba8a804fb281b320b","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin H3vO9+9NxsWQV/YGfn/opEctBJ8jrtZtDKyXpuBTzl4=","Authorization-Date":"2022-05-28 00:29:23","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["a98ba8a804fb281b320b"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.2687338},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-28 00:29:23","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.09039}],"redis":[{"timestamp":"2022-05-28 00:29:23","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0495307},{"timestamp":"2022-05-28 00:29:23","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0787823}],"success":true,"cost_seconds":0.2687338}}
{"level":"info","time":"2022-05-28 00:29:24","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4574149,"trace_id":"eedab5858e15eae56ecf","trace_info":{"trace_id":"eedab5858e15eae56ecf","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Authorization":"admin dsdm5sgwlEjq/P9KcnVkHxYsnu2kmwHjCw43XbswTzo=","Authorization-Date":"2022-05-28 00:29:23","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["eedab5858e15eae56ecf"],"Vary":["Origin"]},"body":{"list":[{"id":2,"hashid":"yZ5V1jp6OoWr","business_key":"22","business_secret":"d7b7ac5ae3dae02172e9","business_developer":"3232","remark":"32","is_used":1,"created_at":"2022-05-25 16:30:01","created_user":"admin","updated_at":"2022-05-25 16:30:01","updated_user":""},{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2022-05-23 10:37:07","created_user":"init","updated_at":"2022-05-23 10:37:07","updated_user":""}],"pagination":{"total":2,"current_page":1,"per_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4574149},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-28 00:29:24","stack":"D:/project/golang/dq-bot/internal/repository/mysql/authorized/gen_authorized.go:108","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":2,"cost_seconds":0.0908342},{"timestamp":"2022-05-28 00:29:24","stack":"D:/project/golang/dq-bot/internal/repository/mysql/authorized/gen_authorized.go:81","sql":"SELECT count(*) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.0905169}],"redis":[{"timestamp":"2022-05-28 00:29:23","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0452099},{"timestamp":"2022-05-28 00:29:23","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0463539}],"success":true,"cost_seconds":0.4574149}}
{"level":"info","time":"2022-05-30 00:32:20","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.5773025,"trace_id":"4d4a09be213dcafc8de0","trace_info":{"trace_id":"4d4a09be213dcafc8de0","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin ATDSz1d1jAOOtUKU37X8DYsB2bBrdUfU1C0m0kAjjbY=","Authorization-Date":"2022-05-30 00:32:19","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["4d4a09be213dcafc8de0"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.5773025},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 00:32:19","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0908664},{"timestamp":"2022-05-30 00:32:19","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0877649},{"timestamp":"2022-05-30 00:32:19","stack":"D:/project/golang/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0880868},{"timestamp":"2022-05-30 00:32:20","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.087506},{"timestamp":"2022-05-30 00:32:20","stack":"D:/project/golang/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.088629}],"redis":[{"timestamp":"2022-05-30 00:32:19","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0439663},{"timestamp":"2022-05-30 00:32:19","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0439416},{"timestamp":"2022-05-30 00:32:20","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0444666}],"success":true,"cost_seconds":0.5773025}}
{"level":"info","time":"2022-05-30 00:32:20","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.2174807,"trace_id":"472596085b45fea8a61e","trace_info":{"trace_id":"472596085b45fea8a61e","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin IZnbqtda0MqkVKLSaZXBS25TqHSbntXAdFDZNAq3kUg=","Authorization-Date":"2022-05-30 00:32:20","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["472596085b45fea8a61e"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.2174807},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 00:32:20","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0871023}],"redis":[{"timestamp":"2022-05-30 00:32:20","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0433139},{"timestamp":"2022-05-30 00:32:20","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0433935}],"success":true,"cost_seconds":0.2174807}}
{"level":"info","time":"2022-05-30 00:32:27","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/authorized?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.406902,"trace_id":"52b56b58e8819d8d5ca6","trace_info":{"trace_id":"52b56b58e8819d8d5ca6","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/authorized?page=1&page_size=10","header":{"Authorization":"admin fd1GIYhdEw+gcJHmv5UZGxaKKIp65UOpn9+IGGBtwjQ=","Authorization-Date":"2022-05-30 00:32:27","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["52b56b58e8819d8d5ca6"],"Vary":["Origin"]},"body":{"list":[{"id":2,"hashid":"yZ5V1jp6OoWr","business_key":"22","business_secret":"d7b7ac5ae3dae02172e9","business_developer":"3232","remark":"32","is_used":1,"created_at":"2022-05-25 16:30:01","created_user":"admin","updated_at":"2022-05-25 16:30:01","updated_user":""},{"id":1,"hashid":"zjON6am6eMdR","business_key":"admin","business_secret":"12878dd962115106db6d","business_developer":"管理员","remark":"管理面板调用","is_used":1,"created_at":"2022-05-23 10:37:07","created_user":"init","updated_at":"2022-05-23 10:37:07","updated_user":""}],"pagination":{"total":2,"current_page":1,"per_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.406902},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 00:32:27","stack":"D:/project/golang/dq-bot/internal/repository/mysql/authorized/gen_authorized.go:108","sql":"SELECT * FROM `authorized` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":2,"cost_seconds":0.0985561},{"timestamp":"2022-05-30 00:32:27","stack":"D:/project/golang/dq-bot/internal/repository/mysql/authorized/gen_authorized.go:81","sql":"SELECT count(*) FROM `authorized` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.0866017}],"redis":[{"timestamp":"2022-05-30 00:32:27","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0437796},{"timestamp":"2022-05-30 00:32:27","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0449486}],"success":true,"cost_seconds":0.406902}}
{"level":"info","time":"2022-05-30 00:32:31","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin?page=1&page_size=10","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4797257,"trace_id":"fd36067bd26a82475966","trace_info":{"trace_id":"fd36067bd26a82475966","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin?page=1&page_size=10","header":{"Authorization":"admin MbXkrQ4huUrO7VoNJATcmgea7MR+tPBrducGWbUp3Ms=","Authorization-Date":"2022-05-30 00:32:30","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["fd36067bd26a82475966"],"Vary":["Origin"]},"body":{"list":[{"id":5,"hashid":"ly0Q6Yxwvrm8","username":"admin2","nickname":"ddd","mobile":"13471687661","is_used":1,"is_online":-1,"created_at":"2022-05-25 16:30:13","created_user":"admin","updated_at":"2022-05-25 16:30:13","updated_user":""},{"id":1,"hashid":"zjON6am6eMdR","username":"admin","nickname":"管理员","mobile":"13888888888","is_used":1,"is_online":1,"created_at":"2022-05-23 10:37:07","created_user":"init","updated_at":"2022-05-23 10:37:07","updated_user":""}],"pagination":{"total":2,"current_page":1,"per_page_count":10}},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4797257},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 00:32:31","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 ORDER BY id DESC LIMIT 10","rows_affected":2,"cost_seconds":0.0881638},{"timestamp":"2022-05-30 00:32:31","stack":"D:/project/golang/dq-bot/internal/repository/mysql/admin/gen_admin.go:81","sql":"SELECT count(*) FROM `admin` WHERE is_deleted = -1 ","rows_affected":1,"cost_seconds":0.0861845}],"redis":[{"timestamp":"2022-05-30 00:32:30","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.04277},{"timestamp":"2022-05-30 00:32:31","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.043783}],"success":true,"cost_seconds":0.4797257}}
{"level":"info","time":"2022-05-30 00:32:32","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/menu","http_code":200,"business_code":0,"success":true,"cost_seconds":0.3062452,"trace_id":"8bcbeef8c8fbc0b3acec","trace_info":{"trace_id":"8bcbeef8c8fbc0b3acec","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/menu","header":{"Authorization":"admin XjB28jy0RyLGMt7xqEVU4vlLaC5o3052abbhnVKat+o=","Authorization-Date":"2022-05-30 00:32:32","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["8bcbeef8c8fbc0b3acec"],"Vary":["Origin"]},"body":{"list":[{"id":1,"hashid":"zjON6am6eMdR","pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box","is_used":1,"sort":10},{"id":4,"hashid":"pDkj6BJ674lJ","pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant","is_used":1,"sort":20},{"id":7,"hashid":"PbGW1e369RMm","pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check","is_used":1,"sort":30},{"id":10,"hashid":"APqnwOQEJZKd","pid":0,"name":"系统管理员","link":"","icon":"mdi-account","is_used":1,"sort":50},{"id":13,"hashid":"35XzEnK1Zn0j","pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search","is_used":1,"sort":60},{"id":16,"hashid":"ZYJVwQp1rlm5","pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools","is_used":1,"sort":70},{"id":2,"hashid":"yZ5V1jp6OoWr","pid":1,"name":"告警邮箱","link":"/config/email","icon":"","is_used":1,"sort":101},{"id":3,"hashid":"JRzOELW6M82Z","pid":1,"name":"错误码","link":"/config/code","icon":"","is_used":1,"sort":102},{"id":5,"hashid":"ly0Q6Yxwvrm8","pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":"","is_used":1,"sort":201},{"id":6,"hashid":"VPLD1bmEq28Z","pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":"","is_used":1,"sort":202},{"id":8,"hashid":"Am4g1XN6RGb8","pid":7,"name":"调用方","link":"/authorized/list","icon":"","is_used":1,"sort":301},{"id":9,"hashid":"eqJzE2zEk7Zr","pid":7,"name":"使用说明","link":"/authorized/demo","icon":"","is_used":1,"sort":302},{"id":24,"hashid":"LqmpEgKE5jaJ","pid":23,"name":"任务列表","link":"/cron/list","icon":"","is_used":-1,"sort":401},{"id":11,"hashid":"ABa26kNw4oYz","pid":10,"name":"管理员","link":"/admin/list","icon":"","is_used":1,"sort":501},{"id":12,"hashid":"gOJz18WEZq0N","pid":10,"name":"菜单管理","link":"/admin/menu","icon":"","is_used":1,"sort":502},{"id":14,"hashid":"25gW6Dl6DkBb","pid":13,"name":"查询缓存","link":"/tool/cache","icon":"","is_used":1,"sort":601},{"id":15,"hashid":"XWxLwR91yB2e","pid":13,"name":"查询数据","link":"/tool/data","icon":"","is_used":1,"sort":602},{"id":22,"hashid":"XDAa64qEpylB","pid":16,"name":"服务升级","link":"/upgrade","icon":"","is_used":1,"sort":701},{"id":17,"hashid":"dZRo6yJEOJK3","pid":16,"name":"Hashids","link":"/tool/hashids","icon":"","is_used":1,"sort":702},{"id":18,"hashid":"K5ko1Ngwq9g0","pid":16,"name":"调用日志","link":"/tool/logs","icon":"","is_used":1,"sort":703},{"id":19,"hashid":"A20NEdK69Dk8","pid":16,"name":"接口文档","link":"/swagger/index.html","icon":"","is_used":1,"sort":704},{"id":20,"hashid":"VJMGw9413ez0","pid":16,"name":"GraphQL","link":"/graphql","icon":"","is_used":1,"sort":705},{"id":21,"hashid":"YXoJ65y6xlbR","pid":16,"name":"接口指标","link":"/metrics","icon":"","is_used":1,"sort":706},{"id":25,"hashid":"PY7jEJXwyMnb","pid":16,"name":"WebSocket","link":"/tool/websocket","icon":"","is_used":1,"sort":707}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.3062452},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 00:32:32","stack":"D:/project/golang/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0867404}],"redis":[{"timestamp":"2022-05-30 00:32:32","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0438581},{"timestamp":"2022-05-30 00:32:32","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0437009}],"success":true,"cost_seconds":0.3062452}}
{"level":"info","time":"2022-05-30 00:32:36","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/tool/cache/search","http_code":200,"business_code":0,"success":true,"cost_seconds":0.354374,"trace_id":"2e9b3199ec0714701037","trace_info":{"trace_id":"2e9b3199ec0714701037","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/tool/cache/search","header":{"Authorization":"admin GpdlIKZE2xmr8vucA6wJU/bWVXWwDyL+AZz4JqBhjGI=","Authorization-Date":"2022-05-30 00:32:35","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["2e9b3199ec0714701037"],"Vary":["Origin"]},"body":{"val":"{\"Id\":1,\"Nickname\":\"清尘\",\"QqId\":\"7972694712745373968\",\"Avatar\":\"7972694712745373968\",\"CreateAt\":\"0001-01-01T00:00:00Z\",\"UpdateAt\":\"0001-01-01T00:00:00Z\"}","ttl":"-1ns"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.354374},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 00:32:36","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0472117},{"timestamp":"2022-05-30 00:32:36","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0437735},{"timestamp":"2022-05-30 00:32:36","handle":"get","key":"user_info:7972694712745373968","cost_seconds":0.0435826}],"success":true,"cost_seconds":0.354374}}
{"level":"info","time":"2022-05-30 00:32:38","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"PATCH","path":"/api/tool/cache/clear","http_code":200,"business_code":0,"success":true,"cost_seconds":0.3069251,"trace_id":"16c3f9473b180b2beea7","trace_info":{"trace_id":"16c3f9473b180b2beea7","request":{"ttl":"un-limit","method":"PATCH","decoded_url":"/api/tool/cache/clear","header":{"Authorization":"admin hvZkK2Gzq7NxBMZANq1L4bQECIXYtYLrV+I0HDkWxpY=","Authorization-Date":"2022-05-30 00:32:38","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["16c3f9473b180b2beea7"],"Vary":["Origin"]},"body":{"bool":true},"http_code":200,"http_code_msg":"OK","cost_seconds":0.3069251},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 00:32:38","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.043848},{"timestamp":"2022-05-30 00:32:38","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0441817},{"timestamp":"2022-05-30 00:32:38","handle":"del","key":"user_info:7972694712745373968","cost_seconds":0.0434814}],"success":true,"cost_seconds":0.3069251}}
{"level":"info","time":"2022-05-30 00:32:54","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/tool/cache/search","http_code":200,"business_code":0,"success":true,"cost_seconds":0.3510401,"trace_id":"ae04a059740ac6904ff5","trace_info":{"trace_id":"ae04a059740ac6904ff5","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/tool/cache/search","header":{"Authorization":"admin J2tzkrConEw9Ymv4xJxdUeukUKluI/LNXgN2je9XKeM=","Authorization-Date":"2022-05-30 00:32:53","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["ae04a059740ac6904ff5"],"Vary":["Origin"]},"body":{"val":"{\"Id\":1,\"Nickname\":\"清尘\",\"QqId\":\"7972694712745373968\",\"Avatar\":\"7972694712745373968\",\"CreateAt\":\"0001-01-01T00:00:00Z\",\"UpdateAt\":\"0001-01-01T00:00:00Z\"}","ttl":"-1ns"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.3510401},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 00:32:53","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0438187},{"timestamp":"2022-05-30 00:32:53","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0438068},{"timestamp":"2022-05-30 00:32:54","handle":"get","key":"user_info:7972694712745373968","cost_seconds":0.0435415}],"success":true,"cost_seconds":0.3510401}}
{"level":"info","time":"2022-05-30 14:49:28","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":401,"business_code":10104,"success":false,"cost_seconds":0.0005008,"trace_id":"1a6a4f00328ab193f1a8","trace_info":{"trace_id":"1a6a4f00328ab193f1a8","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin w4TJA6QY/ZpzDrlo5dCv0ocL9d3116Yc4dLRdtiKB3Y=","Authorization-Date":"2022-05-30 14:49:28","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":""},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["1a6a4f00328ab193f1a8"],"Vary":["Origin"]},"body":null,"business_code":10104,"business_code_msg":"签名信息错误","http_code":401,"http_code_msg":"Unauthorized","cost_seconds":0.0005008},"third_party_requests":null,"debugs":null,"sqls":null,"redis":null,"success":false,"cost_seconds":0.0005008},"error":"Header 中缺少 Token 参数","errorVerbose":"Header 中缺少 Token 参数\ngithub.com/zhangdi168/dq-bot/internal/router/interceptor.(*interceptor).CheckLogin\n\tD:/my/go/src/dq-bot/internal/router/interceptor/check_login.go:21\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.WrapAuthHandler.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:132\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.wrapHandlers.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:211\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func3\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:542\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func2\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:524\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.New.func1\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:328\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/context.go:165\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:489\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/my/go/pkg/mod/github.com/gin-gonic/gin@v1.7.4/gin.go:445\ngithub.com/zhangdi168/dq-bot/internal/pkg/core.(*mux).ServeHTTP\n\tD:/my/go/src/dq-bot/internal/pkg/core/core.go:231\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2916\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:1966\nruntime.goexit\n\tC:/Program Files/Go/src/runtime/asm_amd64.s:1571\n"}
{"level":"info","time":"2022-05-30 14:49:31","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4773238,"trace_id":"efc38bee459420ea97e9","trace_info":{"trace_id":"efc38bee459420ea97e9","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin j3nonQoF4K6VWXhps0/e2X22yWPzsxK+k8vZRq/uAeY=","Authorization-Date":"2022-05-30 14:49:30","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":""},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["efc38bee459420ea97e9"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4773238},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 14:49:30","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0769237},{"timestamp":"2022-05-30 14:49:30","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0722108},{"timestamp":"2022-05-30 14:49:30","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0713441},{"timestamp":"2022-05-30 14:49:30","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0702287},{"timestamp":"2022-05-30 14:49:31","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0742905}],"redis":[{"timestamp":"2022-05-30 14:49:30","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0408684},{"timestamp":"2022-05-30 14:49:30","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0342859},{"timestamp":"2022-05-30 14:49:31","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0361143}],"success":true,"cost_seconds":0.4773238}}
{"level":"info","time":"2022-05-30 14:49:31","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1830868,"trace_id":"ef204c0434f964de748b","trace_info":{"trace_id":"ef204c0434f964de748b","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin 1AQGjoK9jYfqPY2ziHAINa8zmWq0xfd9+yyps3zB9Zw=","Authorization-Date":"2022-05-30 14:49:31","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["ef204c0434f964de748b"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1830868},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 14:49:31","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.06959}],"redis":[{"timestamp":"2022-05-30 14:49:31","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0367312},{"timestamp":"2022-05-30 14:49:31","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.0408106}],"success":true,"cost_seconds":0.1830868}}
{"level":"info","time":"2022-05-30 14:49:38","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/tool/cache/search","http_code":400,"business_code":10109,"success":false,"cost_seconds":0.2216724,"trace_id":"4848ebbd91eef30c54df","trace_info":{"trace_id":"4848ebbd91eef30c54df","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/tool/cache/search","header":{"Authorization":"admin PMgPbfnKv08bGJ7l2NS9VvhoBnWE9dHkEIIk6vBss+g=","Authorization-Date":"2022-05-30 14:49:37","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968%E7%BC%93"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["4848ebbd91eef30c54df"],"Vary":["Origin"]},"body":null,"business_code":10109,"business_code_msg":"缓存不存在","http_code":400,"http_code_msg":"Bad Request","cost_seconds":0.2216724},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 14:49:37","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0361384},{"timestamp":"2022-05-30 14:49:38","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0386264}],"success":false,"cost_seconds":0.2216724}}
{"level":"info","time":"2022-05-30 14:49:42","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/tool/cache/search","http_code":200,"business_code":0,"success":true,"cost_seconds":0.2954932,"trace_id":"cdb3b12afc300c199b04","trace_info":{"trace_id":"cdb3b12afc300c199b04","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/tool/cache/search","header":{"Authorization":"admin diW3iMDiqlAB1b+T8kxtNxhc4xAe2JrzaGR9V2SymVQ=","Authorization-Date":"2022-05-30 14:49:42","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["cdb3b12afc300c199b04"],"Vary":["Origin"]},"body":{"val":"{\"Id\":1,\"Nickname\":\"清尘\",\"QqId\":\"7972694712745373968\",\"Avatar\":\"7972694712745373968\",\"CreateAt\":\"0001-01-01T00:00:00Z\",\"UpdateAt\":\"0001-01-01T00:00:00Z\"}","ttl":"-1ns"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.2954932},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 14:49:42","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0371431},{"timestamp":"2022-05-30 14:49:42","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0375098},{"timestamp":"2022-05-30 14:49:42","handle":"get","key":"user_info:7972694712745373968","cost_seconds":0.0370243}],"success":true,"cost_seconds":0.2954932}}
{"level":"info","time":"2022-05-30 14:49:44","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"PATCH","path":"/api/tool/cache/clear","http_code":200,"business_code":0,"success":true,"cost_seconds":0.2480028,"trace_id":"b0de937e2956d1e2514b","trace_info":{"trace_id":"b0de937e2956d1e2514b","request":{"ttl":"un-limit","method":"PATCH","decoded_url":"/api/tool/cache/clear","header":{"Authorization":"admin IEBJo8Xc0O1K/1aRcrV0P53lD6WEhI97AdyCs5E9tR8=","Authorization-Date":"2022-05-30 14:49:44","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["b0de937e2956d1e2514b"],"Vary":["Origin"]},"body":{"bool":true},"http_code":200,"http_code_msg":"OK","cost_seconds":0.2480028},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 14:49:44","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0352439},{"timestamp":"2022-05-30 14:49:44","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0351512},{"timestamp":"2022-05-30 14:49:44","handle":"del","key":"user_info:7972694712745373968","cost_seconds":0.0352327}],"success":true,"cost_seconds":0.2480028}}
{"level":"info","time":"2022-05-30 16:00:37","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/tool/cache/search","http_code":400,"business_code":10109,"success":false,"cost_seconds":0.231512,"trace_id":"70c0565c2bfb9e24e5c3","trace_info":{"trace_id":"70c0565c2bfb9e24e5c3","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/tool/cache/search","header":{"Authorization":"admin fX7VznJ0ZMeSYp9oUMUGo/kfIH7doU3wfK8bL3d2rX0=","Authorization-Date":"2022-05-30 16:00:36","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968%E7%BC%93"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["70c0565c2bfb9e24e5c3"],"Vary":["Origin"]},"body":null,"business_code":10109,"business_code_msg":"缓存不存在","http_code":400,"http_code_msg":"Bad Request","cost_seconds":0.231512},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 16:00:36","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0390883},{"timestamp":"2022-05-30 16:00:37","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0363517}],"success":false,"cost_seconds":0.231512}}
{"level":"info","time":"2022-05-30 16:00:46","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/tool/cache/search","http_code":200,"business_code":0,"success":true,"cost_seconds":0.2984447,"trace_id":"a30fdc93b13be75d7191","trace_info":{"trace_id":"a30fdc93b13be75d7191","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/tool/cache/search","header":{"Authorization":"admin lXJe2BmYJvyQ7JEA6VEGbpaIe0M4haxGHN6xVrA/p68=","Authorization-Date":"2022-05-30 16:00:46","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=user_info%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["a30fdc93b13be75d7191"],"Vary":["Origin"]},"body":{"val":"null","ttl":"-1ns"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.2984447},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 16:00:46","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0357867},{"timestamp":"2022-05-30 16:00:46","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0368992},{"timestamp":"2022-05-30 16:00:46","handle":"get","key":"user_info:7972694712745373968","cost_seconds":0.0374065}],"success":true,"cost_seconds":0.2984447}}
{"level":"info","time":"2022-05-30 16:00:54","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/tool/cache/search","http_code":200,"business_code":0,"success":true,"cost_seconds":0.3094498,"trace_id":"8cdf9802cca1a81c1716","trace_info":{"trace_id":"8cdf9802cca1a81c1716","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/tool/cache/search","header":{"Authorization":"admin wnsRtq5PiOMRfCxpB/qNr2xxvMVsXtJZiXSTR3xoQJU=","Authorization-Date":"2022-05-30 16:00:54","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=userinfo%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["8cdf9802cca1a81c1716"],"Vary":["Origin"]},"body":{"val":"{\"Id\":7,\"Nickname\":\"https://qqchannel-profile-1251316161.file.myqcloud.com/1653297104bca5220598b483a6?t=1653297104\",\"QqId\":\"7972694712745373968\",\"Avatar\":\"https://qqchannel-profile-1251316161.file.myqcloud.com/1653297104bca5220598b483a6?t=1653297104\",\"CreateAt\":\"2022-05-30T15:58:56+08:00\",\"UpdateAt\":\"2022-05-30T15:58:56+08:00\"}","ttl":"-1ns"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.3094498},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 16:00:54","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0372312},{"timestamp":"2022-05-30 16:00:54","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.0384491},{"timestamp":"2022-05-30 16:00:54","handle":"get","key":"userinfo:7972694712745373968","cost_seconds":0.0374915}],"success":true,"cost_seconds":0.3094498}}
{"level":"info","time":"2022-05-30 16:00:56","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"PATCH","path":"/api/tool/cache/clear","http_code":200,"business_code":0,"success":true,"cost_seconds":0.2589862,"trace_id":"4f3e6d513a6bd11ef4a5","trace_info":{"trace_id":"4f3e6d513a6bd11ef4a5","request":{"ttl":"un-limit","method":"PATCH","decoded_url":"/api/tool/cache/clear","header":{"Authorization":"admin i66rZjIgHnZWV0X2a1elG/oi49/tz6Kna1nKX8KkuWI=","Authorization-Date":"2022-05-30 16:00:56","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"redis_key=userinfo%3A7972694712745373968"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["4f3e6d513a6bd11ef4a5"],"Vary":["Origin"]},"body":{"bool":true},"http_code":200,"http_code_msg":"OK","cost_seconds":0.2589862},"third_party_requests":null,"debugs":null,"sqls":null,"redis":[{"timestamp":"2022-05-30 16:00:56","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0371793},{"timestamp":"2022-05-30 16:00:56","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","cost_seconds":0.037125},{"timestamp":"2022-05-30 16:00:56","handle":"del","key":"userinfo:7972694712745373968","cost_seconds":0.0364255}],"success":true,"cost_seconds":0.2589862}}
{"level":"fatal","time":"2022-05-30 17:38:03","caller":"dq-bot/main.go:78","msg":"http server startup err","domain":"dq-bot[fat]","error":"listen tcp :9999: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted."}
{"level":"info","time":"2022-05-30 17:38:17","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"POST","path":"/api/login","http_code":200,"business_code":0,"success":true,"cost_seconds":0.4514648,"trace_id":"95897ff70e559303c96d","trace_info":{"trace_id":"95897ff70e559303c96d","request":{"ttl":"un-limit","method":"POST","decoded_url":"/api/login","header":{"Authorization":"admin g+WI6cD5Wsi3PJNu5MQAmuanbbFxbsm3cCSvQSpUKAQ=","Authorization-Date":"2022-05-30 17:38:16","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":"username=admin&password=21232f297a57a5a743894a0e4a801fc3"},"response":{"header":{"Access-Control-Allow-Credentials":["true"],"Access-Control-Allow-Origin":["*"],"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["95897ff70e559303c96d"],"Vary":["Origin"]},"body":{"token":"1ba4686338ee7354395ad13f7d3466c1"},"http_code":200,"http_code_msg":"OK","cost_seconds":0.4514648},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:38:16","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND username = 'admin' AND (password = 'f78382de80cf583cf854bbac0b6e796fbde36fe2739ca4ae072637010f179cb0') AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0707725},{"timestamp":"2022-05-30 17:38:16","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0691537},{"timestamp":"2022-05-30 17:38:16","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu/gen_menu.go:108","sql":"SELECT * FROM `menu` WHERE is_deleted = -1 ORDER BY sort ASC ","rows_affected":24,"cost_seconds":0.0681311},{"timestamp":"2022-05-30 17:38:16","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin_menu/gen_admin_menu.go:108","sql":"SELECT * FROM `admin_menu` WHERE admin_id = 1 ORDER BY id DESC ","rows_affected":25,"cost_seconds":0.0677687},{"timestamp":"2022-05-30 17:38:17","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/menu_action/gen_menu_action.go:108","sql":"SELECT * FROM `menu_action` WHERE is_deleted = -1 AND menu_id IN (25,24,23,22,2,3,1,5,6,4,8,9,7,11,12,10,14,15,13,17,18,19,20,21,16) ","rows_affected":48,"cost_seconds":0.0687067}],"redis":[{"timestamp":"2022-05-30 17:38:16","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","value":"{\"user_id\":1,\"user_name\":\"admin\"}","ttl":1440,"cost_seconds":0.0355913},{"timestamp":"2022-05-30 17:38:16","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","value":"[{\"id\":1,\"pid\":0,\"name\":\"配置信息\",\"link\":\"\",\"icon\":\"mdi-settings-box\"},{\"id\":4,\"pid\":0,\"name\":\"代码生成器\",\"link\":\"\",\"icon\":\"mdi-code-not-equal-variant\"},{\"id\":7,\"pid\":0,\"name\":\"授权调用方\",\"link\":\"\",\"icon\":\"mdi-playlist-check\"},{\"id\":10,\"pid\":0,\"name\":\"系统管理员\",\"link\":\"\",\"icon\":\"mdi-account\"},{\"id\":13,\"pid\":0,\"name\":\"查询小助手\",\"link\":\"\",\"icon\":\"mdi-database-search\"},{\"id\":16,\"pid\":0,\"name\":\"实用工具箱\",\"link\":\"\",\"icon\":\"mdi-tools\"},{\"id\":2,\"pid\":1,\"name\":\"告警邮箱\",\"link\":\"/config/email\",\"icon\":\"\"},{\"id\":3,\"pid\":1,\"name\":\"错误码\",\"link\":\"/config/code\",\"icon\":\"\"},{\"id\":5,\"pid\":4,\"name\":\"生成数据表 CURD\",\"link\":\"/generator/gorm\",\"icon\":\"\"},{\"id\":6,\"pid\":4,\"name\":\"生成控制器方法\",\"link\":\"/generator/handler\",\"icon\":\"\"},{\"id\":8,\"pid\":7,\"name\":\"调用方\",\"link\":\"/authorized/list\",\"icon\":\"\"},{\"id\":9,\"pid\":7,\"name\":\"使用说明\",\"link\":\"/authorized/demo\",\"icon\":\"\"},{\"id\":24,\"pid\":23,\"name\":\"任务列表\",\"link\":\"/cron/list\",\"icon\":\"\"},{\"id\":11,\"pid\":10,\"name\":\"管理员\",\"link\":\"/admin/list\",\"icon\":\"\"},{\"id\":12,\"pid\":10,\"name\":\"菜单管理\",\"link\":\"/admin/menu\",\"icon\":\"\"},{\"id\":14,\"pid\":13,\"name\":\"查询缓存\",\"link\":\"/tool/cache\",\"icon\":\"\"},{\"id\":15,\"pid\":13,\"name\":\"查询数据\",\"link\":\"/tool/data\",\"icon\":\"\"},{\"id\":22,\"pid\":16,\"name\":\"服务升级\",\"link\":\"/upgrade\",\"icon\":\"\"},{\"id\":17,\"pid\":16,\"name\":\"Hashids\",\"link\":\"/tool/hashids\",\"icon\":\"\"},{\"id\":18,\"pid\":16,\"name\":\"调用日志\",\"link\":\"/tool/logs\",\"icon\":\"\"},{\"id\":19,\"pid\":16,\"name\":\"接口文档\",\"link\":\"/swagger/index.html\",\"icon\":\"\"},{\"id\":20,\"pid\":16,\"name\":\"GraphQL\",\"link\":\"/graphql\",\"icon\":\"\"},{\"id\":21,\"pid\":16,\"name\":\"接口指标\",\"link\":\"/metrics\",\"icon\":\"\"},{\"id\":25,\"pid\":16,\"name\":\"WebSocket\",\"link\":\"/tool/websocket\",\"icon\":\"\"}]","ttl":1440,"cost_seconds":0.0359392},{"timestamp":"2022-05-30 17:38:17","handle":"set","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:action","value":"[{\"Id\":1,\"MenuId\":17,\"Method\":\"GET\",\"Api\":\"/api/tool/hashids/**\"},{\"Id\":2,\"MenuId\":14,\"Method\":\"POST\",\"Api\":\"/api/tool/cache/search\"},{\"Id\":3,\"MenuId\":14,\"Method\":\"PATCH\",\"Api\":\"/api/tool/cache/clear\"},{\"Id\":4,\"MenuId\":15,\"Method\":\"GET\",\"Api\":\"/api/tool/data/dbs\"},{\"Id\":5,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/mysql\"},{\"Id\":6,\"MenuId\":15,\"Method\":\"POST\",\"Api\":\"/api/tool/data/tables\"},{\"Id\":7,\"MenuId\":2,\"Method\":\"PATCH\",\"Api\":\"/api/config/email\"},{\"Id\":8,\"MenuId\":5,\"Method\":\"POST\",\"Api\":\"/generator/gorm/execute\"},{\"Id\":9,\"MenuId\":6,\"Method\":\"POST\",\"Api\":\"/generator/handler/execute\"},{\"Id\":10,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/add\"},{\"Id\":11,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/authorized/api/*\"},{\"Id\":12,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized\"},{\"Id\":13,\"MenuId\":8,\"Method\":\"PATCH\",\"Api\":\"/api/authorized/used\"},{\"Id\":14,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized/*\"},{\"Id\":15,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized\"},{\"Id\":16,\"MenuId\":8,\"Method\":\"GET\",\"Api\":\"/api/authorized_api\"},{\"Id\":17,\"MenuId\":8,\"Method\":\"POST\",\"Api\":\"/api/authorized_api\"},{\"Id\":18,\"MenuId\":8,\"Method\":\"DELETE\",\"Api\":\"/api/authorized_api/*\"},{\"Id\":19,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/add\"},{\"Id\":20,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin\"},{\"Id\":21,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin\"},{\"Id\":22,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/used\"},{\"Id\":23,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/reset_password/*\"},{\"Id\":24,\"MenuId\":11,\"Method\":\"DELETE\",\"Api\":\"/api/admin/*\"},{\"Id\":25,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/admin/action/*\"},{\"Id\":26,\"MenuId\":11,\"Method\":\"GET\",\"Api\":\"/api/admin/menu/*\"},{\"Id\":27,\"MenuId\":11,\"Method\":\"POST\",\"Api\":\"/api/admin/menu\"},{\"Id\":28,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/admin/menu_action/*\"},{\"Id\":29,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu\"},{\"Id\":30,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu/*\"},{\"Id\":31,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu/*\"},{\"Id\":32,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/used\"},{\"Id\":33,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu\"},{\"Id\":34,\"MenuId\":12,\"Method\":\"GET\",\"Api\":\"/api/menu_action\"},{\"Id\":35,\"MenuId\":12,\"Method\":\"POST\",\"Api\":\"/api/menu_action\"},{\"Id\":36,\"MenuId\":12,\"Method\":\"DELETE\",\"Api\":\"/api/menu_action/*\"},{\"Id\":37,\"MenuId\":22,\"Method\":\"POST\",\"Api\":\"/upgrade/execute\"},{\"Id\":38,\"MenuId\":11,\"Method\":\"PATCH\",\"Api\":\"/api/admin/offline\"},{\"Id\":39,\"MenuId\":12,\"Method\":\"PATCH\",\"Api\":\"/api/menu/sort\"},{\"Id\":40,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/add\"},{\"Id\":41,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/cron/edit/*\"},{\"Id\":42,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron\"},{\"Id\":43,\"MenuId\":24,\"Method\":\"POST\",\"Api\":\"/api/cron/*\"},{\"Id\":44,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron\"},{\"Id\":45,\"MenuId\":24,\"Method\":\"GET\",\"Api\":\"/api/cron/*\"},{\"Id\":46,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/used\"},{\"Id\":47,\"MenuId\":24,\"Method\":\"PATCH\",\"Api\":\"/api/cron/exec/*\"},{\"Id\":48,\"MenuId\":25,\"Method\":\"POST\",\"Api\":\"/api/tool/send_message\"}]","ttl":1440,"cost_seconds":0.0354016}],"success":true,"cost_seconds":0.4514648}}
{"level":"info","time":"2022-05-30 17:38:17","caller":"core/core.go:510","msg":"trace-log","domain":"dq-bot[fat]","method":"GET","path":"/api/admin/info","http_code":200,"business_code":0,"success":true,"cost_seconds":0.1819209,"trace_id":"2a8c7f4780ae919e2931","trace_info":{"trace_id":"2a8c7f4780ae919e2931","request":{"ttl":"un-limit","method":"GET","decoded_url":"/api/admin/info","header":{"Authorization":"admin mX1NpkpMsYJOwUSd5PHh9o6JKTi1qoDBY8O3tgCA2KQ=","Authorization-Date":"2022-05-30 17:38:17","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","Token":"1ba4686338ee7354395ad13f7d3466c1"},"body":""},"response":{"header":{"Content-Type":["application/json; charset=utf-8"],"Trace-Id":["2a8c7f4780ae919e2931"],"Vary":["Origin"]},"body":{"username":"admin","nickname":"管理员","mobile":"13888888888","menu":[{"id":1,"pid":0,"name":"配置信息","link":"","icon":"mdi-settings-box"},{"id":4,"pid":0,"name":"代码生成器","link":"","icon":"mdi-code-not-equal-variant"},{"id":7,"pid":0,"name":"授权调用方","link":"","icon":"mdi-playlist-check"},{"id":10,"pid":0,"name":"系统管理员","link":"","icon":"mdi-account"},{"id":13,"pid":0,"name":"查询小助手","link":"","icon":"mdi-database-search"},{"id":16,"pid":0,"name":"实用工具箱","link":"","icon":"mdi-tools"},{"id":2,"pid":1,"name":"告警邮箱","link":"/config/email","icon":""},{"id":3,"pid":1,"name":"错误码","link":"/config/code","icon":""},{"id":5,"pid":4,"name":"生成数据表 CURD","link":"/generator/gorm","icon":""},{"id":6,"pid":4,"name":"生成控制器方法","link":"/generator/handler","icon":""},{"id":8,"pid":7,"name":"调用方","link":"/authorized/list","icon":""},{"id":9,"pid":7,"name":"使用说明","link":"/authorized/demo","icon":""},{"id":24,"pid":23,"name":"任务列表","link":"/cron/list","icon":""},{"id":11,"pid":10,"name":"管理员","link":"/admin/list","icon":""},{"id":12,"pid":10,"name":"菜单管理","link":"/admin/menu","icon":""},{"id":14,"pid":13,"name":"查询缓存","link":"/tool/cache","icon":""},{"id":15,"pid":13,"name":"查询数据","link":"/tool/data","icon":""},{"id":22,"pid":16,"name":"服务升级","link":"/upgrade","icon":""},{"id":17,"pid":16,"name":"Hashids","link":"/tool/hashids","icon":""},{"id":18,"pid":16,"name":"调用日志","link":"/tool/logs","icon":""},{"id":19,"pid":16,"name":"接口文档","link":"/swagger/index.html","icon":""},{"id":20,"pid":16,"name":"GraphQL","link":"/graphql","icon":""},{"id":21,"pid":16,"name":"接口指标","link":"/metrics","icon":""},{"id":25,"pid":16,"name":"WebSocket","link":"/tool/websocket","icon":""}]},"http_code":200,"http_code_msg":"OK","cost_seconds":0.1819209},"third_party_requests":null,"debugs":null,"sqls":[{"timestamp":"2022-05-30 17:38:17","stack":"D:/my/go/src/dq-bot/internal/repository/mysql/admin/gen_admin.go:108","sql":"SELECT * FROM `admin` WHERE is_deleted = -1 AND id = 1 AND is_used = 1 LIMIT 1","rows_affected":1,"cost_seconds":0.0691212}],"redis":[{"timestamp":"2022-05-30 17:38:17","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1","cost_seconds":0.0376159},{"timestamp":"2022-05-30 17:38:17","handle":"get","key":"dq-bot:login-user:1ba4686338ee7354395ad13f7d3466c1:menu","cost_seconds":0.037993}],"success":true,"cost_seconds":0.1819209}}
